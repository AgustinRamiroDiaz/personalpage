<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="Modern, pretty, and clean theme." name=description><meta content="width=device-width,initial-scale=1" name=viewport><meta content=#ff7800 name=theme-color><link href=https://agustinramirodiaz.github.io/blog/gh-action-get-pages-url/ rel=canonical><title>Dinamically get the URL of a GitHub Pages site in a GitHub Action - Agustín Ramiro Díaz</title><link href=https://agustinramirodiaz.github.io/style.css rel=stylesheet><link media="(prefers-color-scheme: dark)" href=/syntax-theme-dark.css rel=stylesheet><link media="(prefers-color-scheme: light)" href=/syntax-theme-light.css rel=stylesheet><style>:root {--primary-color-alpha:rgba(255,120,0,.2);--primary-color:#ff7800}</style><link href=https://agustinramirodiaz.github.io/favicon.png rel=icon type=image/png><link href=https://agustinramirodiaz.github.io/apple-touch-icon.png rel=apple-touch-icon sizes=180x180 type=image/png><link href=https://mstdn.social/@agustinramirodiaz rel=me><meta content="Agustín Ramiro Díaz" property=og:site_name><meta content="Dinamically get the URL of a GitHub Pages site in a GitHub Action - Agustín Ramiro Díaz" property=og:title><meta content=https://agustinramirodiaz.github.io/blog/gh-action-get-pages-url/ property=og:url><meta property=og:description><meta content=https://agustinramirodiaz.github.io/card.png property=og:image><meta content=summary_large_image property=twitter:card><body><header id=site-nav><nav><a href=#main id=main-content tabindex=0>Skip to main content</a><ul><li id=home><a href=https://agustinramirodiaz.github.io>Agustín Ramiro Díaz</a><li><a href=https://agustinramirodiaz.github.io/blog>Blog</a><li><a href=https://github.com/AgustinRamiroDiaz>GitHub</a><li><a href=https://www.linkedin.com/in/agust%C3%ADn-ramiro-d%C3%ADaz-bb0387184/>LinkedIn</a><li><a href=mailto:agustin.ramiro.diaz@gmail.com>Contact</a><li id=feed><a href=https://agustinramirodiaz.github.io/atom.xml> <svg viewbox="0 0 16 16" fill=currentColor height=16 width=16 xmlns=http://www.w3.org/2000/svg><path d="M1.988 1.988V3c.008.547.453.984 1 .988.004-.004.008-.004.012-.004v.028A8.977 8.977 0 0 1 11.988 13a.991.991 0 0 0 1 .984h1V13h-.004c0-.004 0-.004.004-.008C13.984 7.02 9.184 2.148 3.242 2.02A1.004 1.004 0 0 0 3 1.988v-.004zm0 4V7c.008.547.453.984 1 .988.004-.004.008-.004.012-.004V8a4.985 4.985 0 0 1 4.996 4.844 1.002 1.002 0 0 0 .988 1.145c.008-.005.012-.005.016-.005v.004h.984V13H10c0-3.793-3.047-6.898-6.82-6.992 0-.004-.004-.004-.004-.004A.892.892 0 0 0 3 5.988v-.004zm2 4a1.999 1.999 0 1 0-.002 3.998 1.999 1.999 0 0 0 .002-3.998m0 0"/></svg> <span>Feed</span> </a><li id=toggle-dark-light-theme><a class=navbaricon> <svg viewbox="0 0 48 48" fill=currentColor height=16 width=16 xmlns=http://www.w3.org/2000/svg><path d="M 23.976562 3.9785156 A 1.50015 1.50015 0 0 0 22.5 5.5 L 22.5 8.5 A 1.50015 1.50015 0 1 0 25.5 8.5 L 25.5 5.5 A 1.50015 1.50015 0 0 0 23.976562 3.9785156 z M 10.902344 9.4042969 A 1.50015 1.50015 0 0 0 9.8574219 11.980469 L 11.978516 14.101562 A 1.5012202 1.5012202 0 0 0 14.101562 11.978516 L 11.980469 9.8574219 A 1.50015 1.50015 0 0 0 10.902344 9.4042969 z M 37.050781 9.4042969 A 1.50015 1.50015 0 0 0 36.019531 9.8574219 L 33.898438 11.978516 A 1.5012202 1.5012202 0 0 0 36.021484 14.101562 L 38.142578 11.980469 A 1.50015 1.50015 0 0 0 37.050781 9.4042969 z M 24 13 C 17.942632 13 13 17.942636 13 24 C 13 30.057364 17.942632 35 24 35 C 30.057368 35 35 30.057364 35 24 C 35 17.942636 30.057368 13 24 13 z M 24 16 C 28.436049 16 32 19.563954 32 24 C 32 28.436046 28.436049 32 24 32 C 19.563951 32 16 28.436046 16 24 C 16 19.563954 19.563951 16 24 16 z M 5.5 22.5 A 1.50015 1.50015 0 1 0 5.5 25.5 L 8.5 25.5 A 1.50015 1.50015 0 1 0 8.5 22.5 L 5.5 22.5 z M 39.5 22.5 A 1.50015 1.50015 0 1 0 39.5 25.5 L 42.5 25.5 A 1.50015 1.50015 0 1 0 42.5 22.5 L 39.5 22.5 z M 13.009766 33.445312 A 1.50015 1.50015 0 0 0 11.978516 33.898438 L 9.8574219 36.019531 A 1.501221 1.501221 0 1 0 11.980469 38.142578 L 14.101562 36.021484 A 1.50015 1.50015 0 0 0 13.009766 33.445312 z M 34.943359 33.445312 A 1.50015 1.50015 0 0 0 33.898438 36.021484 L 36.019531 38.142578 A 1.5012209 1.5012209 0 1 0 38.142578 36.019531 L 36.021484 33.898438 A 1.50015 1.50015 0 0 0 34.943359 33.445312 z M 23.976562 37.978516 A 1.50015 1.50015 0 0 0 22.5 39.5 L 22.5 42.5 A 1.50015 1.50015 0 1 0 25.5 42.5 L 25.5 39.5 A 1.50015 1.50015 0 0 0 23.976562 37.978516 z"></path></svg> </a></ul></nav></header><style>:root {
    --bg: {
        {
        config.extra.style.bg_color | default(value="#f4f4f5")
      }
    }

    ;

    --bg-dark: {
        {
        config.extra.style.bg_dark_color | default(value="#18181b")
      }
    }

    ;

    --header: {
        {
        config.extra.style.header_color | default(value="#e4e4e7")
      }
    }

    ;

    --header-dark: {
        {
        config.extra.style.header_dark_color | default(value="#27272a")
      }
    }

    ;
  }</style><script>const darkKey="dark";const setDark=a=>{localStorage.setItem(darkKey,a);if(!a){document.documentElement.style.setProperty("--bg-color","var(--bg-color-l)");document.documentElement.style.setProperty("--fg-color","var(--fg-color-l)");document.documentElement.style.setProperty("--fg-muted-1","var(--fg-muted-1-l)");document.documentElement.style.setProperty("--fg-muted-2","var(--fg-muted-2-l)");document.documentElement.style.setProperty("--fg-muted-3","var(--fg-muted-3-l)");document.documentElement.style.setProperty("--fg-muted-4","var(--fg-muted-4-l)");document.documentElement.style.setProperty("--fg-muted-5","var(--fg-muted-5-l)");document.documentElement.style.setProperty("--nav-bg","var(--nav-bg-l)");document.documentElement.style.setProperty("--orange-bg","var(--orange-bg-l)");document.documentElement.style.setProperty("--orange-fg","var(--orange-fg-l)");document.documentElement.style.setProperty("--purple-bg","var(--purple-bg-l)");document.documentElement.style.setProperty("--purple-fg","var(--purple-fg-l)");document.documentElement.style.setProperty("--red-bg","var(--red-bg-l)");document.documentElement.style.setProperty("--red-fg","var(--red-fg-l)");document.documentElement.style.setProperty("--yellow-bg","var(--yellow-bg-l)");document.documentElement.style.setProperty("--yellow-fg","var(--yellow-fg-l)")}else{document.documentElement.style.setProperty("--bg-color","var(--bg-color-d)");document.documentElement.style.setProperty("--fg-color","var(--fg-color-d)");document.documentElement.style.setProperty("--fg-muted-1","var(--fg-muted-1-d)");document.documentElement.style.setProperty("--fg-muted-2","var(--fg-muted-2-d)");document.documentElement.style.setProperty("--fg-muted-3","var(--fg-muted-3-d)");document.documentElement.style.setProperty("--fg-muted-4","var(--fg-muted-4-d)");document.documentElement.style.setProperty("--fg-muted-5","var(--fg-muted-5-d)");document.documentElement.style.setProperty("--nav-bg","var(--nav-bg-d)");document.documentElement.style.setProperty("--orange-bg","var(--orange-bg-d)");document.documentElement.style.setProperty("--orange-fg","var(--orange-fg-d)");document.documentElement.style.setProperty("--purple-bg","var(--purple-bg-d)");document.documentElement.style.setProperty("--purple-fg","var(--purple-fg-d)");document.documentElement.style.setProperty("--red-bg","var(--red-bg-d)");document.documentElement.style.setProperty("--red-fg","var(--red-fg-d)");document.documentElement.style.setProperty("--yellow-bg","var(--yellow-bg-d)");document.documentElement.style.setProperty("--yellow-fg","var(--yellow-fg-d)")}};const darkScheme=window.matchMedia("(prefers-color-scheme: dark)");const darkVal=localStorage.getItem(darkKey);setDark(darkVal?darkVal==="true":darkScheme.matches);darkScheme.addEventListener("change",a=>{setDark(a.matches)});const btnDark=document.getElementById("toggle-dark-light-theme");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem(darkKey)!=="true")})</script><div class=container id=main><h1>Dinamically get the URL of a GitHub Pages site in a GitHub Action</h1><small> <time datetime=2024-02-05T00:00:00+00:00 pubdate>05 February 2024</time> <span>•</span> <span>Author: Agustín Ramiro Díaz</span> <span>•</span> <ul class=tags><li><a class=tag href=https://agustinramirodiaz.github.io/tags/github/>GitHub</a><li><a class=tag href=https://agustinramirodiaz.github.io/tags/github-actions/>GitHub Actions</a><li><a class=tag href=https://agustinramirodiaz.github.io/tags/ci-cd/>CI/CD</a></ul> </small><h1 id=how-to-get-the-url-of-a-github-pages-site-in-a-github-action>How to get the URL of a GitHub Pages site in a GitHub Action</h1><p>We can use GitHub’s CLI in order to retrieve the Github Pages site with<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">gh</span></span><span class="z-meta z-function-call z-arguments z-shell"> api <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>repos/<span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">GITHUB_REPOSITORY</span></span>/pages<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>jq</span> <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">'</span>.html_url<span class="z-punctuation z-definition z-string z-end z-shell">'</span></span></span>
</span></code></pre><p>Luckily, <code>$GITHUB_REPOSITORY</code> is a predefined environment variable in GitHub Actions, so we can use it to get the URL of the GitHub Pages site.<pre class="language-yml z-code" data-lang=yml><code class=language-yml data-lang=yml><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> this script is executed on every push to main
</span></span><span class="z-source z-yaml"><span class="z-constant z-language z-boolean z-yaml">on</span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">push</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">branches</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">main</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Build and deploy GH Pages</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">jobs</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">build</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">runs-on</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ubuntu-latest</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">steps</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">checkout</span> <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> we first checkout the code
</span></span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">uses</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">actions/checkout@v4</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">get url</span> <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> then we get the url of the github pages site
</span></span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">env</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">GH_TOKEN</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">${{ github.token }}</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">run</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">          <span class="z-keyword z-control z-flow z-block-scalar z-literal z-yaml">|</span> <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> we use the gh cli to get the url and save it in an environment variable
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">          url=$(gh api "repos/$GITHUB_REPOSITORY/pages" --jq '.html_url')
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">          echo "url=$url" >> $GITHUB_ENV
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml"></span>      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">build_and_deploy</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">uses</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">shalzz/zola-deploy-action@v0.18.0</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">env</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">          <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Target branch
</span></span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">PAGES_BRANCH</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">gh-pages</span>
</span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">BUILD_FLAGS</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">--base-url ${{ env.url }}</span> <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> we pass the url to zola
</span></span><span class="z-source z-yaml">          <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Provide personal access token
</span></span><span class="z-source z-yaml">          <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> TOKEN: ${{ secrets.TOKEN }}
</span></span><span class="z-source z-yaml">          <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Or if publishing to the same repo, use the automatic token
</span></span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">TOKEN</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">${{ secrets.GITHUB_TOKEN }}</span>
</span></code></pre><hr><nav id=post-nav><a class="post-nav-item post-nav-next" href=https://agustinramirodiaz.github.io/blog/docker-file-permissions/> <div class=nav-arrow>Next →</div> <span class=post-title>Understanding Linux file permissions in Docker containers</span> </a></nav><p class=dialog-buttons><a class=inline-button href=#top>Go to top</a> <a class="inline-button colored" href=https://github.com/AgustinRamiroDiaz/personalpage/issues>File an issue</a></div><footer id=site-footer></footer>